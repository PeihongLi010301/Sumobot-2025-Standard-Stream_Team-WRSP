# Sumobot 2025 Standard Stream 相扑机器人标准组比赛
- 比赛组织方：UNSW Robotics and Mechatronics Society (RAMSoc)
- 团队名：WRSP（后改名为LRSP但未正式提交赛组委修改）
- 团队成员：李培泓（Peihong Li），余政阳（Zhengyang Yu），Suria，Sharath
- 比赛时间：2025年7月31日
- 核心硬件：Arduino Nano + L298N电机驱动模块 + HC-SR04超声波传感器模块×3 + KY-033红外传感器模块×2 + 直流减速电机×2

## 比赛概述
Sumobot 比赛遵循传统相扑比赛的核心规则，有两台自主机器人在擂台上对抗，目标是将对手推出擂台外
### 赛制规则
- 比赛流程：
  - 每场比赛最多 3 局，每局最长 2 分钟
  - 裁判发出开始信号后需等待 5 秒才可行动
  - 当对手被推出擂台外（身体任何部分触地）即判胜
  - 若时间到未分出胜负，裁判将根据技术表现等决定胜负
- 限制：
  - 最大尺寸：200mm × 200mm
  - 最大重量：1kg
  - 预算不超过 A$200
  - 只能使用组委会提供的套件和预先批准的额外零件
  - 不可改动传动系统，不可使用磁铁或粘性物质增加抓地力
### 擂台规格
- 外径：120cm
- 内径（黑色比赛区）：115cm
- 白边宽度：2.5cm
- 材质：18mm厚MDF板，表面喷漆

## 我们的机器人设计
### 机械结构设计与优化
- 低重心、宽底盘设计：SolidWorks建模，提升稳定性与抗翻能力 
- 重量分布优化：将电池、电机等大重量组件靠近底盘放置，便于快速转向和推挤时重心稳定  
- 月牙形边缘 + 斜坡楔组合前铲设计：解决单一楔形设计无法限制对手逃离的问题  
- 壳体与盖板通过PLA材料3D打印得到
### 控制架构
- Arduino Nano 作为主控
- 有限状态机（FSM）：
  - `SEARCHING`：原地旋转寻找对手
  - `ATTACKING`：持续向前推进（50ms 步长），每步检测边缘和对手位置
  - `AVOIDING_EDGE`：立即停车 → 后退 → 定时 ±90° 转向
- 边缘检测优先：一旦触发立即中断其他动作
### 传感器
- HC-SR04超声波传感器：前 / 左 / 右 三路，用于对手定位
- 红外循迹传感器：用于检测场地白边，防止跌落
- 去抖动机制：边缘检测需连续命中 `EDGE_DETECT_CONFIRM_COUNT=2` 次才确认有效
### 运动控制
- 时间式 PID 转向（输出为转向时长 ms）：
  - 固定全功率转动，避免低速死区
  - 参数：`kp=4.0, ki=0.8, kd=1.5`
  - 一阶低通滤波 + 抗积分饱和（±50）+ 最大输出限制（500ms）
- 90°定时转向：默认400ms（可调整）
- `DEGREES_TO_MS = 4.4`：实测转角-时间标定常数，即满功率旋转 1° ≈ 4.4 ms，可用于精确角度控制
### 电源与安全
- L298N双路驱动
- 按规则要求，电池串联 1A–5A 保险丝
- 所有长动作均设定时间上限，防止卡死
### 代码亮点
- 编程语言：Arduino C++
- 核心特性：
  - 模块化函数封装运动与传感器逻辑
  - 状态机逻辑保证行为可预测
  - 传感器融合进行对手定位
  - 50ms 步长攻击循环，快速响应场上变化
  - 时间式 PID 转向，减少抖动并提升一致性

### 核心参数一览
EDGE_DETECT_CONFIRM_COUNT = 2   // 连续两次命中才判定边缘
ATTACK_STEP = 50                // 攻击步长 ms
MAX_ATTACK_TIME = 1200          // 单次攻击最长时间 ms
kp = 4.0, ki = 0.8, kd = 1.5    // PID 参数
MAX_CONTROLLER_OUTPUT = 500     // 最大转向时长 ms
DEGREES_TO_MS = 4.4             // 每度旋转耗时 ms

### 文件说明
- 比赛规则详见：参赛规则说明书（英文版）_OFFICIAL SUMOBOTS RULE BOOK 2025.pdf
- 完整源码：详见Sumobot2025_Code.ino。代码内包含注释，说明设计思路与可调参数
- 完整模型：详见文件夹 MechanicalDesign_HM
    - 此文件包含初代、二代、三代的设计方案，如需查看最终方案的完整装配文件，请查看 MechanicalDesign_HM\Integrated Design_HM\Sumobot2025_ID_2nd.SLDASM
    - 如需查看最终方案的壳体设计文件，请查看 MechanicalDesign_HM\最终壳体设计方案\Chasis_ID_3rd.STEP
- 所用元件的规格及参数详细说明：详见文件夹 Sumobot组件技术文档 
- 比赛视频：请通过 比赛视频链接.txt 的百度网盘链接查看
- 实物及制作过程、参赛过程图片：请见文件夹 实物及过程图片